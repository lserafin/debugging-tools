(window["webpackJsonpwt-index-debugger"]=window["webpackJsonpwt-index-debugger"]||[]).push([[0],{317:function(e,t,a){e.exports=a(698)},463:function(e,t){},487:function(e,t){},489:function(e,t){},555:function(e,t){},602:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=602},679:function(e,t,a){},680:function(e,t,a){var n={"./AbstractOrganizationFactory.json":681,"./AbstractSegmentDirectory.json":682,"./ENS.json":683,"./OpenZeppelinUpgradesAddress.json":684,"./OpenZeppelinUpgradesOwnable.json":685,"./Organization.json":686,"./OrganizationFactory.json":687,"./OrganizationInterface.json":688,"./Package.json":689,"./Resolver.json":690,"./SegmentDirectory.json":691,"./WindingTreeEntrypoint.json":692};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=680},695:function(e,t,a){},698:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),l=a.n(s),o=a(58),i=a(315),c=a(59),u=a(22),m=a.n(u),d=a(31),p=a(16),h=a(17),g=a(18),f=a(19),b=a(2),v=a(20),E=a(11),y=function(){return r.a.createElement("div",{id:"app-header"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",id:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{className:"navbar-brand mr-2",to:"/"},"Winding Tree"),r.a.createElement(o.b,{className:"nav-link",to:"/debugger"},"Debugger"),r.a.createElement(o.b,{className:"nav-link",to:"/guarantee-generator"},"Guarantee Generator"),r.a.createElement(o.b,{className:"nav-link",to:"/contract-caller"},"Contract Caller"))))},w=function(){return r.a.createElement(E.Footer,{copyrightHref:"https://windingtree.com",copyrightText:"Winding Tree"},r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("dl",{className:"mb-1"},r.a.createElement("dt",{className:"mb-1"},"About"),r.a.createElement("dd",null,r.a.createElement("nav",{className:"nav flex-column small"},r.a.createElement("a",{href:"https://windingtree.com",className:"nav-link px-0 text-white text--alpha-inverse"},"Homepage"),r.a.createElement("a",{href:"https://blog.windingtree.com/",className:"nav-link px-0 text-white text--alpha-inverse"},"Blog"),r.a.createElement("a",{href:"https://developers.windingtree.com",className:"nav-link px-0 text-white text--alpha-inverse"},"Developer portal"))))),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("dl",{className:"mb-1"},r.a.createElement("dt",{className:"mb-1"},"Developers"),r.a.createElement("dd",null,r.a.createElement("nav",{className:"nav flex-column small"},r.a.createElement("a",{href:"https://github.com/windingtree/debugging-tools",className:"nav-link px-0 text-white text--alpha-inverse"},"Source code"),r.a.createElement("a",{href:"https://github.com/windingtree",className:"nav-link px-0 text-white text--alpha-inverse"},"GitHub"),r.a.createElement("a",{href:"https://groups.google.com/forum/#!forum/windingtree",className:"nav-link px-0 text-white text--alpha-inverse"},"Google Group"))))))},x=a(309),k=function(e){var t=e.block,a=e.label;return t&&a?r.a.createElement("div",{className:"loader",style:{height:t,opacity:1}},r.a.createElement("div",null,r.a.createElement("i",{className:"mdi mdi-loading mdi-36px"}),r.a.createElement("p",null,a))):t?r.a.createElement("div",{className:"loader",style:{height:t,opacity:1}},r.a.createElement("i",{className:"mdi mdi-loading mdi-36px"})):a?r.a.createElement("span",null,r.a.createElement("i",{className:"mdi mdi-loading mdi-36px mdi-spin text-primary"})," ",a):r.a.createElement("i",{className:"mdi mdi-loading mdi-36px mdi-spin text-primary"})},O=a(310),j=a.n(O),N=a(311),C=a.n(N),A=function(e){var t=e.network,a=e.address,n=e.children;return r.a.createElement("a",{href:"https://".concat("mainnet"!==t?"".concat(t,"."):"","etherscan.io/address/").concat(a),target:"_blank",rel:"noopener noreferrer"},n)},S=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={field:void 0,link:void 0,status:void 0},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n,r,s,l,o=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.index,n=t.fieldName,e.next=3,a[n];case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=a[n];case 6:r=e.t0,s=r,l=!1,r&&r.ref&&0===r.ref.indexOf("bzz-raw:")?(s="".concat("https://swarm.windingtree.com","/").concat(r.ref),l=!0):r&&r.ref?(s=r.ref,l=!0):s.startsWith&&s.startsWith("https://")&&(l=!0),this.setState({field:r,link:s}),l&&fetch(s).then(function(){o.setState({status:!0})}).catch(function(){o.setState({status:!1})});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.field,n=e.link,s=e.status,l=this.props.fieldName;if((!a||!a.ref)&&l.indexOf("Uri")!==l.length-3){if("object"===typeof a){var o=Object.keys(a).sort(function(e,t){return e>t?1:-1}).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("strong",null,e),": ",r.a.createElement(t,{index:a,fieldName:e}))});return r.a.createElement("ul",null,o)}return r.a.createElement("span",null,a)}return r.a.createElement("span",null,r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},a&&a.ref||a),void 0===s&&r.a.createElement(k,null),!0===s&&r.a.createElement("i",{className:"mdi mdi-24px mdi-check",style:{color:"green"}}),!1===s&&r.a.createElement("i",{className:"mdi mdi-24px mdi-exclamation",style:{color:"red"}}))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={resolved:!1,address:void 0,owner:void 0,orgJsonUri:void 0,orgJsonHash:void 0,orgJsonHashValid:void 0,orgJsonHashExpected:void 0,resolvedOrgJson:!1,orgJson:void 0,orgJsonError:void 0},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n,r,s,l,o,i,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.item,a=this.state,n=a.resolved,r=a.resolvedOrgJson,n){e.next=17;break}return e.next=5,t.address;case 5:return e.t0=e.sent,e.next=8,t.owner;case 8:return e.t1=e.sent,e.next=11,t.orgJsonUri;case 11:return e.t2=e.sent,e.next=14,t.orgJsonHash;case 14:e.t3=e.sent,s={address:e.t0,owner:e.t1,orgJsonUri:e.t2,orgJsonHash:e.t3,resolved:!0},this._isMounted&&this.setState(s);case 17:if(r){e.next=46;break}return e.prev=18,e.next=21,t.orgJson;case 21:return e.next=23,e.sent.contents;case 23:return l=e.sent,o=!1,i=void 0,e.prev=26,e.next=29,t.validateOrgJsonHash();case 29:return o=e.sent,e.next=32,t.orgJson;case 32:return e.next=34,e.sent.downloadRaw();case 34:c=e.sent,i=t.web3Utils.getSoliditySha3Hash(c),e.next=40;break;case 38:e.prev=38,e.t4=e.catch(26);case 40:this._isMounted&&this.setState({orgJson:l,orgJsonHashValid:o,resolvedOrgJson:!0,orgJsonHashExpected:i,orgJsonError:void 0}),e.next=46;break;case 43:e.prev=43,e.t5=e.catch(18),this._isMounted&&this.setState({orgJsonError:e.t5.toString(),resolvedOrgJson:!0});case 46:case"end":return e.stop()}},e,this,[[18,43],[26,38]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.item,a=e.network,n=e.segment,s=e.entrypoint,l=e.readApi,o=this.state,i=o.resolved,c=o.address,u=o.owner,m=o.orgJsonUri,d=o.orgJsonHash,p=o.orgJsonHashValid,h=o.orgJsonHashExpected,g=o.resolvedOrgJson,f=o.orgJson,b=o.orgJsonError;if(!i)return r.a.createElement(E.Row,null,r.a.createElement(E.Col,null,r.a.createElement(k,{label:"Loading data from ".concat(t.address),block:128})));var v=[];return g&&f&&(v=Object.keys(f).sort(function(e,t){return e>t?1:-1}).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("strong",null,e),": ",r.a.createElement(S,{index:f,fieldName:e}))})),r.a.createElement(E.Row,null,r.a.createElement(E.Col,{className:"mb-1"},r.a.createElement("h4",null,c,r.a.createElement("span",{className:"badge badge-pill badge-primary ml-1"},r.a.createElement("a",{href:"/debugger/".concat(s,"/").concat(n,"/").concat(c),target:"_blank",rel:"noopener noreferrer"},"Permalink")),r.a.createElement("span",{className:"badge badge-pill badge-primary ml-1"},r.a.createElement(A,{network:a,address:c},"Etherscan")),l&&r.a.createElement("span",{className:"badge badge-pill badge-primary ml-1"},r.a.createElement("a",{href:"".concat(l,"/").concat(c),target:"_blank",rel:"noopener noreferrer"},"Read API"))),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Owner"),r.a.createElement("td",null,r.a.createElement(A,{network:a,address:u},u))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON URI"),r.a.createElement("td",null,r.a.createElement(S,{index:{uri:{ref:m}},fieldName:"uri"}))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON hash"),r.a.createElement("td",null,d,p?r.a.createElement("i",{className:"mdi mdi-24px mdi-check",style:{color:"green"}}):r.a.createElement("i",{className:"mdi mdi-24px mdi-exclamation",style:{color:"red"},title:"Expected ".concat(h,", maybe check your whitespace?")}))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON contents"),r.a.createElement("td",null,!g&&r.a.createElement(k,null),g&&b&&r.a.createElement("p",{className:"alert alert-danger"},b),g&&f&&r.a.createElement("ul",null,v)))))))}}]),t}(n.Component),F={hotels:{readApiSuffix:"hotels",singular:"hotel",plural:"hotels"},airlines:{readApiSuffix:"airlines",singular:"airline",plural:"airlines"},otas:{singular:"OTA",plural:"OTAs"}},J=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).state={config:void 0,items:void 0,lifTokenAddress:void 0,nextItemPage:1},a.getItems=a.getItems.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.instance,n=t.segment,this.setState({config:F[n],items:void 0,lifTokenAddress:void 0}),e.t0=this,e.next=5,a.getOrganizations();case 5:return e.t1=e.sent,e.next=8,a._getDeployedDirectory();case 8:return e.next=10,e.sent.methods.getLifToken().call();case 10:e.t2=e.sent,e.t3={items:e.t1,lifTokenAddress:e.t2},e.t0.setState.call(e.t0,e.t3);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(m.a.mark(function e(t,a){var n,r,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.instance,s=n.segment,t.instance===r){e.next=14;break}return this.setState({config:F[s],items:void 0,lifTokenAddress:void 0}),e.t0=this,e.next=6,r.getOrganizations();case 6:return e.t1=e.sent,e.next=9,r._getDeployedDirectory();case 9:return e.next=11,e.sent.methods.getLifToken().call();case 11:e.t2=e.sent,e.t3={items:e.t1,lifTokenAddress:e.t2},e.t0.setState.call(e.t0,e.t3);case 14:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){var e=this.state,t=e.nextItemPage,a=e.items,n=e.config,s=this.props,l=s.readApi,o=s.network,i=s.segment,c=s.entrypoint,u=s.addressFilter;return a.filter(function(e){return!u||e.address===u}).slice(0,5*t).map(function(e){var t=l&&n.readApiSuffix?"".concat(l,"/").concat(n.readApiSuffix):void 0;return r.a.createElement(D,{item:e,key:e.address,segment:i,entrypoint:c,network:o,readApi:t})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.instance,n=t.network,s=t.addressFilter,l=this.state,o=l.items,i=l.lifTokenAddress,c=l.config,u=l.nextItemPage;if(!o)return r.a.createElement(k,{label:"Loading items from ".concat(a.address),block:128});var m=this.getItems();return r.a.createElement(E.Container,null,r.a.createElement(E.Row,null,r.a.createElement(E.Col,null,r.a.createElement("h2",null,"Directory at ",r.a.createElement(A,{network:n,address:a.address},a.address)),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Lif token address"),r.a.createElement("td",null,r.a.createElement(A,{network:n,address:i},i))),r.a.createElement("tr",null,r.a.createElement("th",null,c.singular.substr(0,1).toUpperCase(),c.singular.substr(1)," count"),r.a.createElement("td",null,o.length)))),r.a.createElement("h3",null,c.plural.substr(0,1).toUpperCase(),c.plural.substr(1)))),m,5*u<o.length&&r.a.createElement(E.Row,null,r.a.createElement(E.Col,null,r.a.createElement("p",{className:"text-center mb-2"},!s&&r.a.createElement(E.Button,{onClick:function(){var t=e.state.nextItemPage;e.setState({nextItemPage:t+1})}},"Load more")))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).state={libs:void 0,entrypointInst:void 0,selectedDirectoryInst:void 0,selectedDirectory:"",directories:void 0,addressFilter:""},a.onDirectoryChange=a.onDirectoryChange.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"_getLibs",value:function(e){var t=this.state.libs;return e.network?t&&t.options&&t.options.onChainDataOptions&&t.options.onChainDataOptions.provider&&t.options.onChainDataOptions.provider.indexOf(e.network)>-1?t:x.WtJsLibs.createInstance({onChainDataOptions:{provider:"https://".concat(e.network,".infura.io/v3/").concat("def1927234dd483c84e21d35d0e36a95")},offChainDataOptions:{adapters:{"bzz-raw":{options:{swarmProviderUrl:"https://swarm.windingtree.com"},create:function(e){return new j.a(e)}},https:{options:{},create:function(e){return new C.a(e)}}}}}):t}},{key:"_setupEntrypoint",value:function(){var e=Object(d.a)(m.a.mark(function e(t){var a,n,r,s,l,o,i=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:void 0,n=this._getLibs(t),r=n.getEntrypoint(t.address),e.next=5,r.getSegments();case 5:return s=e.sent,l=a||s[0],e.prev=7,e.next=10,r.getSegmentDirectory(l);case 10:o=e.sent,e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(7),l=s[0],e.next=18,r.getSegmentDirectory(l);case 18:o=e.sent;case 19:this.setState({libs:n,entrypointInst:r,directories:s,selectedDirectory:l,selectedDirectoryInst:o});case 20:case"end":return e.stop()}},e,this,[[7,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onDirectoryChange",value:function(){var e=Object(d.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.target.value)){e.next=10;break}return n=this.state.entrypointInst,e.t0=this,e.next=6,n.getSegmentDirectory(a);case 6:e.t1=e.sent,e.t2=a,e.t3={selectedDirectoryInst:e.t1,selectedDirectory:e.t2},e.t0.setState.call(e.t0,e.t3);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.entrypoint,(n=t.urlParams).organizationAddress&&this.setState({addressFilter:n.organizationAddress}),e.next=4,this._setupEntrypoint(a,n.segment);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=this.props.entrypoint).address!==t.entrypoint.address){e.next=3;break}return e.abrupt("return");case 3:return this.setState({selectedDirectoryInst:void 0,selectedDirectory:"",directories:void 0,addressFilter:""}),e.next=6,this._setupEntrypoint(a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.entrypoint,a=this.state,n=a.directories,s=a.selectedDirectory,l=a.selectedDirectoryInst,o=a.addressFilter;if(!n)return r.a.createElement(k,{label:"Loading segment directories",block:128});var i=n.map(function(e){return r.a.createElement("option",{key:e,value:e},e)});return r.a.createElement("div",null,r.a.createElement(E.Form.Group,{controlId:"entrypoint"},r.a.createElement(E.Form.Control,{as:"select",onChange:this.onDirectoryChange,value:s},i),r.a.createElement(E.Form.Control,{type:"text",placeholder:"Optionally filter by organization address",className:"form-control",value:o,onChange:function(t){e.setState({addressFilter:t.target.value})}})),r.a.createElement("div",{className:"mt-2"},s&&r.a.createElement(J,{instance:l,network:t.network,entrypoint:t.address,readApi:t.readApi,segment:s,addressFilter:o})))}}]),t}(n.Component),M=a(95),T=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).state={entrypoint:void 0},a.onEntrypointChange=a.onEntrypointChange.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"onEntrypointChange",value:function(){var e=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=M.find(function(e){return e.address===t.target.value}),this.setState({entrypoint:a});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.match.params;e.entrypointAddress?this.onEntrypointChange({target:{value:e.entrypointAddress}}):this.onEntrypointChange({target:{value:M.length&&M[0].address}})}},{key:"render",value:function(){var e=this.state.entrypoint,t=this.props.match,a=M.map(function(e){return r.a.createElement("option",{key:e.name,value:e.address},e.name," (",e.address,")")});return r.a.createElement("div",null,r.a.createElement(y,null),e&&r.a.createElement("div",{className:"container mt-1"},r.a.createElement(E.Form.Group,{controlId:"entrypoint"},r.a.createElement(E.Form.Control,{as:"select",value:e.address,onChange:this.onEntrypointChange},a)),r.a.createElement("div",{className:"mt-2"},!e&&r.a.createElement("div",{className:"alert alert-info"},"Select Winding Tree entrypoint first."),e&&r.a.createElement(I,{entrypoint:e,urlParams:t.params}))),r.a.createElement(w,null))}}]),t}(n.Component),P=function(e){var t=e.children;return"undefined"!==typeof window.ethereum?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(E.Alert,{variant:"warning",show:!0,dismissible:!1},"You need to install and allow"," ",r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Metamask")," ","or another Web3 enabled browser that supports"," ",r.a.createElement("a",{href:"https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sign",target:"_blank",rel:"noopener noreferrer"},"eth_sign call"),"!")},R=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={inProgress:!1,sub:void 0,tick:void 0},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){if(!this.state.sub){var e=this;this.setState({sub:window.ethereum.on("accountsChanged",function(t){e.setState({tick:new Date})})})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.blocking,s=this.state.inProgress;return!1===n||void 0!==window.ethereum.selectedAddress?r.a.createElement(r.a.Fragment,null,a):r.a.createElement(E.Button,{onClick:function(){e.setState({inProgress:!0}),window.ethereum.enable().then(function(){e.setState({inProgress:!1})})},active:s,block:!0,disabled:s,outlined:!1,className:"btn-warning"},"You need to sign in to"," ",r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Metamask")," ","first.")}}]),t}(r.a.Component),_=a(5),H=a(33),G=a.n(H),U=a(312),B=a.n(U),z=a(78),L=a.n(z),W=a(121),Y=a.n(W),K=a(313),V=a.n(K),Z=function(e){var t=e.contents;return r.a.createElement("div",{className:"clipboardable"},r.a.createElement("pre",null,t),r.a.createElement(V.a,{"data-clipboard-text":t,className:"clipboard-wrap","button-title":"Copy to clipboard"},r.a.createElement("i",{className:"mdi mdi-clipboard-text"})))},q=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).state={sub:void 0,claimParts:{subject:"",guarantor:"",expiresAt:L()().add(1,"month").format("YYYY-MM-DD HH:mm:ss")},errors:{},claim:"",signature:""},a.handleClaimPartChange=a.handleClaimPartChange.bind(Object(b.a)(a)),a.generateClaim=a.generateClaim.bind(Object(b.a)(a)),a.web3Eth=new B.a(window.ethereum),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Y.a.parse(window.location.hash)).msg)try{a=G.a.hexToUtf8(t.msg),n=JSON.parse(a),this.setState({claimParts:{subject:n.subject,guarantor:n.guarantor,expiresAt:L()(n.expiresAt).format("YYYY-MM-DD HH:mm:ss")},claim:a})}catch(r){delete t.msg,window.location.hash=Y.a.stringify(t),this.setState({errors:{global:"Cannot process URL parameters: ".concat(r.toString())}})}case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClaimPartChange",value:function(e){var t=e.target.id,a=e.target.value,n=this.state,r=n.errors,s=n.claimParts,l=Object.assign(s,Object(_.a)({},t,a)),o={};["subject","guarantor"].indexOf(t)>-1?G.a.isAddress(a)||(l=Object.assign(s,Object(_.a)({},t,a)),o=Object.assign(r,Object(_.a)({},t,"Invalid ethereum address"))):"expiresAt"===t&&("Invalid date"===L()(a).format()&&(l=Object.assign(s,Object(_.a)({},t,a)),o=Object.assign(r,Object(_.a)({},t,"Invalid date"))),L()(a).isAfter(new Date)||(l=Object.assign(s,Object(_.a)({},t,a)),o=Object.assign(r,Object(_.a)({},t,"Expiration has to be in the future")))),window.location.hash="",this.setState({claimParts:l,errors:o,signature:"",claim:""})}},{key:"generateClaim",value:function(){var e=this.state,t=e.claimParts,a=e.errors,n="";t.subject&&t.guarantor&&t.expiresAt&&!Object.keys(a).length&&(n=JSON.stringify(Object.assign({},t,{expiresAt:L()(t.expiresAt).valueOf()/1e3}))),window.location.hash=Y.a.stringify({msg:G.a.utf8ToHex(n)}),this.setState({claim:n,signature:""})}},{key:"render",value:function(){var e=this;if("undefined"===typeof window.ethereum)return r.a.createElement(r.a.Fragment,null);var t=this.state,a=t.claimParts,n=t.errors,s=t.claim,l=t.signature;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container mb-2"},n.global&&r.a.createElement(E.Alert,{variant:"danger",show:!0,dismissible:!0},n.global),r.a.createElement("h3",null,"1. Claim"),r.a.createElement(E.Form.Group,{controlId:"subject"},r.a.createElement(E.Form.Label,null,"Subject (ORG.ID Ethereum address)"),r.a.createElement(E.Form.Control,{type:"text",placeholder:"0x...",value:a.subject,onChange:this.handleClaimPartChange,className:n.subject?"is-invalid":""}),r.a.createElement(E.Form.Text,{className:"text-muted"},"This is the address assigned to the 0xORG smart contract you are making the guarantee for."),n.subject&&r.a.createElement(E.Form.Text,{className:"text-danger"},n.subject)),r.a.createElement(E.Form.Group,{controlId:"guarantor"},r.a.createElement(E.Form.Label,null,"Guarantor (ORG.ID Ethereum address)"),r.a.createElement(E.Form.Control,{type:"text",placeholder:"0x...",value:a.guarantor,onChange:this.handleClaimPartChange,className:n.guarantor?"is-invalid":""}),r.a.createElement(E.Form.Text,{className:"text-muted"},"This ORG.ID's ",r.a.createElement("code",null,"associatedKeys")," will be checked if the account you sign this message with can actually sign messages on its behalf when verifying this guarantee."),n.guarantor&&r.a.createElement(E.Form.Text,{className:"text-danger"},n.guarantor)),r.a.createElement(E.Form.Group,{controlId:"expiresAt"},r.a.createElement(E.Form.Label,null,"Expiration date and time"),r.a.createElement(E.Form.Control,{type:"string",value:a.expiresAt,onChange:this.handleClaimPartChange,className:n.expiresAt?"is-invalid":""}),n.expiresAt&&r.a.createElement(E.Form.Text,{className:"text-danger"},n.expiresAt)),r.a.createElement(E.Button,{onClick:this.generateClaim,block:!0,disabled:!(a.subject&&a.guarantor&&a.expiresAt)||Object.keys(n).length},"Generate claim"),s&&r.a.createElement("div",null,r.a.createElement("h4",{className:"mt-1"},"Serialized claim"),r.a.createElement(Z,{contents:s}),r.a.createElement("h4",{className:"mt-1"},"Hex-encoded serialized claim"),r.a.createElement(Z,{contents:G.a.utf8ToHex(s)}))),r.a.createElement("div",{className:"container mb-2"},r.a.createElement("h3",null,"2. Signature"),r.a.createElement("div",null,r.a.createElement(R,null,l&&r.a.createElement(Z,{contents:l}),r.a.createElement(E.Button,{onClick:function(){e.web3Eth.personal.sign(s,window.ethereum.selectedAddress).then(function(t){e.setState({signature:t})})},active:!1,block:!0,disabled:l||!s||!window.ethereum.selectedAddress,outlined:!1,className:""},"Create signature"),(!s||!window.ethereum.selectedAddress)&&r.a.createElement("p",{className:"text-muted"},"You can sign the claim if it is generated and if you are logged into Metamask."),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mt-1"},r.a.createElement("a",{href:"https://www.etherchain.org/tools/verifySignature",target:"_blank",rel:"noopener noreferrer"},"Verify independently on Etherchain:")),r.a.createElement(Z,{contents:'{\n  "version": "2",\n  "address": "'.concat(window.ethereum.selectedAddress,'",\n  "msg": "').concat(G.a.utf8ToHex(s),'",\n  "sig": "').concat(l,'"\n}')}))))),s&&l&&r.a.createElement("div",{className:"container mb-2"},r.a.createElement("h3",null,"4. Result"),r.a.createElement(Z,{contents:'{\n  "claim": "'.concat(G.a.utf8ToHex(s),'",\n  "signature": "').concat(l,'"\n}')}),r.a.createElement("p",null,"Send the result back to the ORG.ID owner.")))}}]),t}(r.a.Component),Q=function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement("h2",{className:"text-center"},"Generate a relationship guarantee"),r.a.createElement(P,null,r.a.createElement(q,null))),r.a.createElement(w,null))}}]),t}(n.Component),X=a(93),$=a(316),ee=a(314),te=a.n(ee),ae=(a(679),["./Organization.json","./OrganizationFactory.json","./SegmentDirectory.json","./WindingTreeEntrypoint.json"]),ne=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).state={ethAddress:"0xa268937c2573e2AB274BF6d96e88FfE0827F0D4D",abi:null,parsedAbi:[],abiOK:!1,lastResult:null,lastError:null,selectedMethod:null,contractAbis:null},a.fillAbi=function(e,t){"select-option"===t.action&&a.setState({abi:JSON.stringify(e.value),parsedAbi:e.value,abiOK:!0})},a.callSmartContractMethod=a.callSmartContractMethod.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadAbis();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadAbis",value:function(){var e,t={};(e=a(680)).keys().forEach(function(a){return t[a]=e(a)});var n=[];for(var r in t)if(-1!==ae.indexOf(r)){var s=t[r];n.push({value:s.abi,label:s.contractName})}this.setState({contractAbis:n}),this.fillAbi(n[3],{action:"select-option"})}},{key:"parseAbi",value:function(){var e;try{e=JSON.parse(this.state.abi)}catch(t){return this.setState({abiOK:!1}),void this.setState({lastError:t})}return this.setState({parsedAbi:e,abiOK:!0}),e}},{key:"err",value:function(e){this.setState({lastError:e}),console.error(this.state.lastError)}},{key:"callSmartContractMethod",value:function(e,t){e.target.blur();var a=e.target.parentElement.parentElement,n=Array.from(a.querySelectorAll("input[type=text]").values()).map(function(e){return e.value});try{this._callSmartContractMethod(t,n).catch(this.err.bind(this))}catch(r){this.err(r)}}},{key:"_callSmartContractMethod",value:function(e,t){var a=this;if(console.log("Calling "+e+"("+t.join(", ")+")"),!window.ethereum||!window.web3)throw new Error("Missing ethereum provider, consider installing Metamask");window.ethereum.enable();var n=new te.a(window.web3.currentProvider);if(!this.state.parsedAbi)throw new Error("ABI missing or not a json.");return n.accounts().then(function(r){var s=n.contract(a.state.parsedAbi,void 0,{from:r[0],gas:3e6}).at(a.state.ethAddress);return console.log(e),console.log(t),s[e].apply(s,Object(X.a)(t)).then(function(e){a.setState({lastResult:e}),console.log(e),console.log(JSON.stringify(e,null,2))}).catch(a.err.bind(a))})}},{key:"render",value:function(){var e=this;if("undefined"===typeof window.ethereum)return r.a.createElement(r.a.Fragment,null);var t=this.state,a=t.ethAddress,n=t.abi,s=t.parsedAbi,l=t.abiOK,o=t.lastResult,i=t.lastError,c=t.selectedMethod,u=t.contractAbis;return r.a.createElement("div",{className:"caller"},r.a.createElement("label",null,"Address"),r.a.createElement(E.Form.Control,{type:"text",placeholder:"0x...",className:"form-control",value:a,onChange:function(t){e.setState({ethAddress:t.target.value})}}),r.a.createElement("label",null,"Contract"),r.a.createElement($.a,{options:u,onChange:this.fillAbi,defaultValue:u[3]}),r.a.createElement("label",null,"ABI"),r.a.createElement("textarea",{className:l?"form-control":"form-control text-danger",value:n,onChange:function(t){e.setState({abi:t.target.value}),e.parseAbi()}}),r.a.createElement("br",null),r.a.createElement(R,null,r.a.createElement("h3",null,"Network:"," ".concat(function(e){switch(e){case"1":return"Main";case"2":return"Morden";case"3":return"Ropsten";case"4":return"Rinkeby";case"42":return"Kovan";default:return"Unknown"}}(window.ethereum.networkVersion)," "),r.a.createElement("small",null,"You can change the network only in Metamask.")),r.a.createElement("h3",null,"Functions"," ",r.a.createElement("small",null,"Click on a function name to set parameters and call the function.")),s.map(function(t){return"function"===t.type&&r.a.createElement("div",{key:t.name},r.a.createElement("span",{className:t.name===c?"card":""},r.a.createElement("span",{onClick:function(){e.setState({selectedMethod:c===t.name?null:t.name})},className:"btn btn-link"},t.name),c===t.name&&r.a.createElement("span",{className:"input-group"},t.inputs.map(function(e){return r.a.createElement(E.Form.Control,{type:"text",className:"form-control",placeholder:"".concat(e.name," (").concat(e.type,")"),key:e.name})}),r.a.createElement(E.Button,{onClick:function(a){return e.callSmartContractMethod(a,t.name)},className:"btn form-control btn-primary"},"Call!"))))}),o&&r.a.createElement("div",{className:"alert alert-success alert-dismissable",role:"alert"},r.a.createElement("h4",{className:"alert-heading"},"Result:"),r.a.createElement("pre",null,JSON.stringify(o,null,2)),r.a.createElement("br",null),r.a.createElement(E.Button,{className:"btn",onClick:function(){e.setState({lastResult:null})}},"Close")),i&&r.a.createElement("div",{className:"alert alert-danger alert-dismissable",role:"alert"},r.a.createElement("strong",null,"ERROR:")," ",i.toString()," ",r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:function(){e.setState({lastError:null})}},"Close"))))}}]),t}(r.a.Component),re=function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement("h2",{className:"text-center"},"Call a contract"),r.a.createElement("p",null,"Set contract address and ABI (or select from preloaded contracts) and choose a function to call. See ",r.a.createElement("a",{href:"https://developers.windingtree.com/tutorials/how-to-call-smartcontract.html"},"developer portal")," for documentation."),r.a.createElement("p",null,"If you have trouble calling contracts, be aware that the ABIs provided here will only work with a ",r.a.createElement("code",null,"^0.8.1")," version of ",r.a.createElement("code",null,"@windingtree/wt-contracts"),". You can get ABIs for previous version on ",r.a.createElement("a",{href:"https://cdn.jsdelivr.net/npm/@windingtree/wt-contracts/"},"jsDelivr"),"."),r.a.createElement(P,null,r.a.createElement(ne,null))),r.a.createElement(w,null))}}]),t}(n.Component),se=function(){return r.a.createElement("main",{id:"app-content",className:"content-error bg-grad-up"},r.a.createElement("article",{className:"app-section d-flex align-items-center"},r.a.createElement(E.Container,null,r.a.createElement("div",{className:"py-1 py-md-5 text-center"},r.a.createElement("h1",{className:"mb-1 text-white"},"Oops... 404"),r.a.createElement("p",{className:"mb-2 lead text-white"},"That is not the page you are looking for."),r.a.createElement(E.Button,{href:"/",variant:"primary"},"Go to main")))))},le=function(){return r.a.createElement(c.c,null,r.a.createElement(c.a,{path:["/debugger/:entrypointAddress/:segment/:organizationAddress","/debugger/:entrypointAddress/:segment/","/debugger/:entrypointAddress","/debugger","/debugger.html"],component:T}),r.a.createElement(c.a,{path:["/guarantee-generator","/guarantee-generator.html"],component:Q}),r.a.createElement(c.a,{path:["/contract-caller","/contract-caller.html"],component:re}),r.a.createElement(c.a,{path:"/",exact:!0,component:T}),r.a.createElement(c.a,{component:se}))};a(694),a(695);!function(e){l.a.render;(0,l.a.hydrate)(r.a.createElement(i.AppContainer,null,r.a.createElement(o.a,{basename:""},r.a.createElement(e,null))),document.getElementById("root"))}(le,document.getElementById("root"))},95:function(e){e.exports=JSON.parse('[{"name":"Ropsten test environment","address":"0xa268937c2573e2AB274BF6d96e88FfE0827F0D4D","network":"ropsten","readApi":"https://madrid-api.windingtree.com"},{"name":"Mainnet Playground","address":"0xC974dC6eFE2EFAD463DaA97f1f4a88e1c9d62E38","network":"mainnet"},{"name":"Mainnet","address":"0xDDFD213784A60B1e0215D2d07d71999cD2A40D34","network":"mainnet"}]')}},[[317,1,2]]]);
//# sourceMappingURL=main.a668dc37.chunk.js.map