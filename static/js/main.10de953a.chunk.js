(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{315:function(e,t,a){e.exports=a(691)},463:function(e,t){},486:function(e,t){},488:function(e,t){},554:function(e,t){},674:function(e,t,a){},675:function(e,t,a){var n={"./AbstractOrganizationFactory.json":676,"./AbstractSegmentDirectory.json":677,"./ENS.json":678,"./Organization.json":679,"./OrganizationFactory.json":680,"./OrganizationInterface.json":681,"./Package.json":682,"./Resolver.json":683,"./SegmentDirectory.json":684,"./WindingTreeEntrypoint.json":685};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=675},688:function(e,t,a){},691:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),s=a.n(l),c=a(56),o=a(312),i=a(57),m=a(18),u=a.n(m),d=a(30),h=a(24),p=a(25),f=a(28),g=a(26),b=a(48),E=a(27),v=a(10),x=function(){return r.a.createElement("div",{id:"app-header"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",id:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(c.b,{className:"navbar-brand mr-2",to:"/"},"Winding Tree"),r.a.createElement(c.b,{className:"nav-link",to:"/debugger"},"Debugger"),r.a.createElement(c.b,{className:"nav-link",to:"/guarantee-generator"},"Guarantee Generator"),r.a.createElement(c.b,{className:"nav-link",to:"/contract-caller"},"Contract Caller"))))},w=function(){return r.a.createElement(v.Footer,{copyrightHref:"https://windingtree.com",copyrightText:"Winding Tree"},r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("dl",{className:"mb-1"},r.a.createElement("dt",{className:"mb-1"},"About"),r.a.createElement("dd",null,r.a.createElement("nav",{className:"nav flex-column small"},r.a.createElement("a",{href:"https://windingtree.com",className:"nav-link px-0 text-white text--alpha-inverse"},"Homepage"),r.a.createElement("a",{href:"https://blog.windingtree.com/",className:"nav-link px-0 text-white text--alpha-inverse"},"Blog"),r.a.createElement("a",{href:"https://developers.windingtree.com",className:"nav-link px-0 text-white text--alpha-inverse"},"Developer portal"))))),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("dl",{className:"mb-1"},r.a.createElement("dt",{className:"mb-1"},"Developers"),r.a.createElement("dd",null,r.a.createElement("nav",{className:"nav flex-column small"},r.a.createElement("a",{href:"https://github.com/windingtree/debugging-tools",className:"nav-link px-0 text-white text--alpha-inverse"},"Source code"),r.a.createElement("a",{href:"https://github.com/windingtree",className:"nav-link px-0 text-white text--alpha-inverse"},"GitHub"),r.a.createElement("a",{href:"https://groups.google.com/forum/#!forum/windingtree",className:"nav-link px-0 text-white text--alpha-inverse"},"Google Group"))))))},y=a(307),k=a(308),O=a.n(k),j=a(309),N=a.n(j),A=function(e){var t=e.block,a=e.label;return t&&a?r.a.createElement("div",{className:"loader",style:{height:t,opacity:1}},r.a.createElement("div",null,r.a.createElement("i",{className:"mdi mdi-loading mdi-36px"}),r.a.createElement("p",null,a))):t?r.a.createElement("div",{className:"loader",style:{height:t,opacity:1}},r.a.createElement("i",{className:"mdi mdi-loading mdi-36px"})):a?r.a.createElement("span",null,r.a.createElement("i",{className:"mdi mdi-loading mdi-36px mdi-spin text-primary"})," ",a):r.a.createElement("i",{className:"mdi mdi-loading mdi-36px mdi-spin text-primary"})},C=function(e){var t=e.network,a=e.address,n=e.children;return r.a.createElement("a",{href:"https://".concat("mainnet"!==t?"".concat(t,"."):"","etherscan.io/address/").concat(a),target:"_blank",rel:"noopener noreferrer"},n)},S=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={field:void 0,link:void 0,status:void 0},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n,r,l,s,c=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.index,n=t.fieldName,e.next=3,a[n];case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=a[n];case 6:r=e.t0,l=r,s=!1,r&&r.ref&&0===r.ref.indexOf("bzz-raw:")?(l="".concat("https://swarm.windingtree.com","/").concat(r.ref),s=!0):r&&r.ref?(l=r.ref,s=!0):l.startsWith&&l.startsWith("https://")&&(s=!0),this.setState({field:r,link:l}),s&&fetch(l).then(function(){c.setState({status:!0})}).catch(function(){c.setState({status:!1})});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.field,n=e.link,l=e.status,s=this.props.fieldName;if((!a||!a.ref)&&s.indexOf("Uri")!==s.length-3){if("object"===typeof a){var c=Object.keys(a).sort(function(e,t){return e>t?1:-1}).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("strong",null,e),": ",r.a.createElement(t,{index:a,fieldName:e}))});return r.a.createElement("ul",null,c)}return r.a.createElement("span",null,a)}return r.a.createElement("span",null,r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},a&&a.ref||a),void 0===l&&r.a.createElement(A,null),!0===l&&r.a.createElement("i",{className:"mdi mdi-24px mdi-check",style:{color:"green"}}),!1===l&&r.a.createElement("i",{className:"mdi mdi-24px mdi-exclamation",style:{color:"red"}}))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={resolved:!1,address:void 0,owner:void 0,orgJsonUri:void 0,orgJsonHash:void 0,orgJsonHashValid:void 0,resolvedOrgJson:!1,orgJson:void 0,orgJsonError:void 0},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n,r,l,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.item,a=this.state,n=a.resolved,r=a.resolvedOrgJson,n){e.next=17;break}return e.next=5,t.address;case 5:return e.t0=e.sent,e.next=8,t.owner;case 8:return e.t1=e.sent,e.next=11,t.orgJsonUri;case 11:return e.t2=e.sent,e.next=14,t.orgJsonHash;case 14:e.t3=e.sent,l={address:e.t0,owner:e.t1,orgJsonUri:e.t2,orgJsonHash:e.t3,resolved:!0},this._isMounted&&this.setState(l);case 17:if(r){e.next=39;break}return e.prev=18,e.next=21,t.orgJson;case 21:return e.next=23,e.sent.contents;case 23:return s=e.sent,c=!1,e.prev=25,e.next=28,t.validateOrgJsonHash();case 28:c=e.sent,e.next=33;break;case 31:e.prev=31,e.t4=e.catch(25);case 33:this._isMounted&&this.setState({orgJson:s,orgJsonHashValid:c,resolvedOrgJson:!0,orgJsonError:void 0}),e.next=39;break;case 36:e.prev=36,e.t5=e.catch(18),this._isMounted&&this.setState({orgJsonError:e.t5.toString(),resolvedOrgJson:!0});case 39:case"end":return e.stop()}},e,this,[[18,36],[25,31]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(d.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.item,a=e.network,n=e.readApi,l=this.state,s=l.resolved,c=l.address,o=l.owner,i=l.orgJsonUri,m=l.orgJsonHash,u=l.orgJsonHashValid,d=l.resolvedOrgJson,h=l.orgJson,p=l.orgJsonError;if(!s)return r.a.createElement(v.Row,null,r.a.createElement(v.Col,null,r.a.createElement(A,{label:"Loading data from ".concat(t.address),block:128})));var f=[];return d&&h&&(f=Object.keys(h).sort(function(e,t){return e>t?1:-1}).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("strong",null,e),": ",r.a.createElement(S,{index:h,fieldName:e}))})),r.a.createElement(v.Row,null,r.a.createElement(v.Col,{className:"mb-1"},r.a.createElement("h4",null,c,r.a.createElement("span",{className:"badge badge-pill badge-primary ml-1"},r.a.createElement(C,{network:a,address:c},"Etherscan")),n&&r.a.createElement("span",{className:"badge badge-pill badge-primary ml-1"},r.a.createElement("a",{href:"".concat(n,"/").concat(c),target:"_blank",rel:"noopener noreferrer"},"Read API"))),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Owner"),r.a.createElement("td",null,r.a.createElement(C,{network:a,address:o},o))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON URI"),r.a.createElement("td",null,r.a.createElement(S,{index:{uri:{ref:i}},fieldName:"uri"}))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON hash"),r.a.createElement("td",null,m,u?r.a.createElement("i",{className:"mdi mdi-24px mdi-check",style:{color:"green"}}):r.a.createElement("i",{className:"mdi mdi-24px mdi-exclamation",style:{color:"red"}}))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON contents"),r.a.createElement("td",null,!d&&r.a.createElement(A,null),d&&p&&r.a.createElement("p",{className:"alert alert-danger"},p),d&&h&&r.a.createElement("ul",null,f)))))))}}]),t}(n.Component),J={hotels:{readApiSuffix:"hotels",singular:"hotel",plural:"hotels"},airlines:{readApiSuffix:"airlines",singular:"airline",plural:"airlines"}},I=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={config:void 0,items:void 0,lifTokenAddress:void 0,nextItemPage:1},a.getItems=a.getItems.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.instance,n=t.segment,this.setState({config:J[n]}),e.t0=this,e.next=5,a.getOrganizations();case 5:return e.t1=e.sent,e.next=8,a._getDeployedDirectory();case 8:return e.next=10,e.sent.methods.getLifToken().call();case 10:e.t2=e.sent,e.t3={items:e.t1,lifTokenAddress:e.t2},e.t0.setState.call(e.t0,e.t3);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(u.a.mark(function e(t,a){var n,r,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.instance,l=n.segment,t.instance===r){e.next=15;break}return this.setState({config:J[l]}),this.setState({items:void 0,lifTokenAddress:void 0}),e.t0=this,e.next=7,r.getOrganizations();case 7:return e.t1=e.sent,e.next=10,r._getDeployedDirectory();case 10:return e.next=12,e.sent.methods.getLifToken().call();case 12:e.t2=e.sent,e.t3={items:e.t1,lifTokenAddress:e.t2},e.t0.setState.call(e.t0,e.t3);case 15:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){var e=this.state,t=e.nextItemPage,a=e.items,n=e.config,l=this.props,s=l.readApi,c=l.network,o=l.ethAddress;return a.filter(function(e){return!o||e.address===o}).slice(0,5*t).map(function(e){var t=s?"".concat(s,"/").concat(n.readApiSuffix):void 0;return r.a.createElement(D,{item:e,key:e.address,network:c,readApi:t})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.instance,n=t.network,l=t.ethAddress,s=this.state,c=s.items,o=s.lifTokenAddress,i=s.config,m=s.nextItemPage;if(!c)return r.a.createElement(A,{label:"Loading items from ".concat(a.address),block:128});var u=this.getItems();return r.a.createElement(v.Container,null,r.a.createElement(v.Row,null,r.a.createElement(v.Col,null,r.a.createElement("h2",null,"Directory at ",r.a.createElement(C,{network:n,address:a.address},a.address)),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Lif token address"),r.a.createElement("td",null,r.a.createElement(C,{network:n,address:o},o))),r.a.createElement("tr",null,r.a.createElement("th",null,i.singular," count"),r.a.createElement("td",null,c.length)))),r.a.createElement("h3",null,i.plural.substr(0,1).toUpperCase(),i.plural.substr(1)))),u,5*m<c.length&&r.a.createElement(v.Row,null,r.a.createElement(v.Col,null,r.a.createElement("p",{className:"text-center mb-2"},!l&&r.a.createElement(v.Button,{onClick:function(){var t=e.state.nextItemPage;e.setState({nextItemPage:t+1})}},"Load more")))))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={directory:void 0},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"_setDirectory",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.WtJsLibs.createInstance({onChainDataOptions:{provider:"https://".concat(t.network,".infura.io/v3/").concat("def1927234dd483c84e21d35d0e36a95")},offChainDataOptions:{adapters:{"bzz-raw":{options:{swarmProviderUrl:"https://swarm.windingtree.com"},create:function(e){return new O.a(e)}},https:{options:{},create:function(e){return new N.a(e)}}}}}),n=a.getEntrypoint(t.entrypoint),e.t0=this,e.next=5,n.getSegmentDirectory(t.segment);case 5:e.t1=e.sent,e.t2={directory:e.t1},e.t0.setState.call(e.t0,e.t2);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.index,e.next=3,this._setDirectory(t);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=this.props.index).address!==t.index.address){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this._setDirectory(a);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.index,a=e.ethAddress,n=this.state.directory;return r.a.createElement("div",null,n&&r.a.createElement(I,{instance:n,network:t.network,readApi:t.readApi,segment:t.segment,ethAddress:a}))}}]),t}(n.Component),M=a(93),T=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={index:M.length&&M[0],ethAddress:""},a.onIndexChange=a.onIndexChange.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"onIndexChange",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=M.find(function(e){return e.address===t.target.value}),this.setState({index:a});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this.props.match.params;e.organizationAddress&&this.setState({ethAddress:e.organizationAddress}),e.indexAddress&&this.onIndexChange({target:{value:e.indexAddress}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.index,n=t.ethAddress,l=M.map(function(e){return r.a.createElement("option",{key:e.name,value:e.address},e.name," (",e.address,")")});return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement(v.Form.Group,{controlId:"index"},r.a.createElement(v.Form.Control,{as:"select",onChange:this.onIndexChange,defaultValue:a.address},l),r.a.createElement(v.Form.Control,{type:"text",placeholder:"optionally filter by organization address",className:"form-control",value:n,onChange:function(t){e.setState({ethAddress:t.target.value})}})),r.a.createElement("div",{className:"mt-2"},!a&&r.a.createElement("div",{className:"alert alert-info"},"Select Winding Tree index first."),a&&r.a.createElement(F,{index:a,ethAddress:n}))),r.a.createElement(w,null))}}]),t}(n.Component),P=function(e){var t=e.children;return"undefined"!==typeof window.ethereum?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(v.Alert,{variant:"warning",show:!0,dismissible:!1},"You need to install and allow"," ",r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Metamask")," ","or another Web3 enabled browser that supports"," ",r.a.createElement("a",{href:"https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sign",target:"_blank",rel:"noopener noreferrer"},"eth_sign call"),"!")},R=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={inProgress:!1,sub:void 0,tick:void 0},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){if(!this.state.sub){var e=this;this.setState({sub:window.ethereum.on("accountsChanged",function(t){e.setState({tick:new Date})})})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.blocking,l=this.state.inProgress;return!1===n||void 0!==window.ethereum.selectedAddress?r.a.createElement(r.a.Fragment,null,a):r.a.createElement(v.Button,{onClick:function(){e.setState({inProgress:!0}),window.ethereum.enable().then(function(){e.setState({inProgress:!1})})},active:l,block:!0,disabled:l,outlined:!1,className:"btn-warning"},"You need to sign in to"," ",r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Metamask")," ","first.")}}]),t}(r.a.Component),_=a(58),G=a(31),H=a.n(G),B=a(119),z=a.n(B),W=a(77),U=a.n(W),L=a(120),Y=a.n(L),K=a(310),V=a.n(K),q=function(e){var t=e.contents;return r.a.createElement("div",{className:"clipboardable"},r.a.createElement("pre",null,t),r.a.createElement(V.a,{"data-clipboard-text":t,className:"clipboard-wrap","button-title":"Copy to clipboard"},r.a.createElement("i",{className:"mdi mdi-clipboard-text"})))},Q=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={sub:void 0,claimParts:{subject:"",guarantor:"",expiresAt:U()().add(1,"month").format("YYYY-MM-DD HH:mm:ss")},errors:{},claim:"",signature:""},a.handleClaimPartChange=a.handleClaimPartChange.bind(Object(b.a)(a)),a.generateClaim=a.generateClaim.bind(Object(b.a)(a)),a.web3Eth=new z.a(window.ethereum),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Y.a.parse(window.location.hash)).msg)try{a=H.a.hexToUtf8(t.msg),n=JSON.parse(a),this.setState({claimParts:{subject:n.subject,guarantor:n.guarantor,expiresAt:U()(n.expiresAt).format("YYYY-MM-DD HH:mm:ss")},claim:a})}catch(r){delete t.msg,window.location.hash=Y.a.stringify(t),this.setState({errors:{global:"Cannot process URL parameters: ".concat(r.toString())}})}case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClaimPartChange",value:function(e){var t=e.target.id,a=e.target.value,n=this.state,r=n.errors,l=n.claimParts,s=Object.assign(l,Object(_.a)({},t,a)),c={};["subject","guarantor"].indexOf(t)>-1?H.a.isAddress(a)||(s=Object.assign(l,Object(_.a)({},t,a)),c=Object.assign(r,Object(_.a)({},t,"Invalid ethereum address"))):"expiresAt"===t&&("Invalid date"===U()(a).format()&&(s=Object.assign(l,Object(_.a)({},t,a)),c=Object.assign(r,Object(_.a)({},t,"Invalid date"))),U()(a).isAfter(new Date)||(s=Object.assign(l,Object(_.a)({},t,a)),c=Object.assign(r,Object(_.a)({},t,"Expiration has to be in the future")))),window.location.hash="",this.setState({claimParts:s,errors:c,signature:"",claim:""})}},{key:"generateClaim",value:function(){var e=this.state,t=e.claimParts,a=e.errors,n="";t.subject&&t.guarantor&&t.expiresAt&&!Object.keys(a).length&&(n=JSON.stringify(Object.assign({},t,{expiresAt:U()(t.expiresAt).valueOf()/1e3}))),window.location.hash=Y.a.stringify({msg:H.a.utf8ToHex(n)}),this.setState({claim:n,signature:""})}},{key:"render",value:function(){var e=this;if("undefined"===typeof window.ethereum)return r.a.createElement(r.a.Fragment,null);var t=this.state,a=t.claimParts,n=t.errors,l=t.claim,s=t.signature;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container mb-2"},n.global&&r.a.createElement(v.Alert,{variant:"danger",show:!0,dismissible:!0},n.global),r.a.createElement("h3",null,"1. Claim"),r.a.createElement(v.Form.Group,{controlId:"subject"},r.a.createElement(v.Form.Label,null,"Subject (ORG.ID Ethereum address)"),r.a.createElement(v.Form.Control,{type:"text",placeholder:"0x...",value:a.subject,onChange:this.handleClaimPartChange,className:n.subject?"is-invalid":""}),r.a.createElement(v.Form.Text,{className:"text-muted"},"This is the address assigned to the 0xORG smart contract you are making the guarantee for."),n.subject&&r.a.createElement(v.Form.Text,{className:"text-danger"},n.subject)),r.a.createElement(v.Form.Group,{controlId:"guarantor"},r.a.createElement(v.Form.Label,null,"Guarantor (ORG.ID Ethereum address)"),r.a.createElement(v.Form.Control,{type:"text",placeholder:"0x...",value:a.guarantor,onChange:this.handleClaimPartChange,className:n.guarantor?"is-invalid":""}),r.a.createElement(v.Form.Text,{className:"text-muted"},"This ORG.ID's ",r.a.createElement("code",null,"associatedKeys")," will be checked if the account you sign this message with can actually sign messages on its behalf when verifying this guarantee."),n.guarantor&&r.a.createElement(v.Form.Text,{className:"text-danger"},n.guarantor)),r.a.createElement(v.Form.Group,{controlId:"expiresAt"},r.a.createElement(v.Form.Label,null,"Expiration date and time"),r.a.createElement(v.Form.Control,{type:"string",value:a.expiresAt,onChange:this.handleClaimPartChange,className:n.expiresAt?"is-invalid":""}),n.expiresAt&&r.a.createElement(v.Form.Text,{className:"text-danger"},n.expiresAt)),r.a.createElement(v.Button,{onClick:this.generateClaim,block:!0,disabled:!(a.subject&&a.guarantor&&a.expiresAt)||Object.keys(n).length},"Generate claim"),l&&r.a.createElement("div",null,r.a.createElement("h4",{className:"mt-1"},"Serialized claim"),r.a.createElement(q,{contents:l}),r.a.createElement("h4",{className:"mt-1"},"Hex-encoded serialized claim"),r.a.createElement(q,{contents:H.a.utf8ToHex(l)}))),r.a.createElement("div",{className:"container mb-2"},r.a.createElement("h3",null,"2. Signature"),r.a.createElement("div",null,r.a.createElement(R,null,s&&r.a.createElement(q,{contents:s}),r.a.createElement(v.Button,{onClick:function(){e.web3Eth.personal.sign(l,window.ethereum.selectedAddress).then(function(t){e.setState({signature:t})})},active:!1,block:!0,disabled:s||!l||!window.ethereum.selectedAddress,outlined:!1,className:""},"Create signature"),(!l||!window.ethereum.selectedAddress)&&r.a.createElement("p",{className:"text-muted"},"You can sign the claim if it is generated and if you are logged into Metamask."),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mt-1"},r.a.createElement("a",{href:"https://www.etherchain.org/tools/verifySignature",target:"_blank",rel:"noopener noreferrer"},"Verify independently on Etherchain:")),r.a.createElement(q,{contents:'{\n  "version": "2",\n  "address": "'.concat(window.ethereum.selectedAddress,'",\n  "msg": "').concat(H.a.utf8ToHex(l),'",\n  "sig": "').concat(s,'"\n}')}))))),l&&s&&r.a.createElement("div",{className:"container mb-2"},r.a.createElement("h3",null,"4. Result"),r.a.createElement(q,{contents:'{\n  "claim": "'.concat(H.a.utf8ToHex(l),'",\n  "signature": "').concat(s,'"\n}')}),r.a.createElement("p",null,"Send the result back to the ORG.ID owner.")))}}]),t}(r.a.Component),X=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement("h2",{className:"text-center"},"Generate a relationship guarantee"),r.a.createElement(P,null,r.a.createElement(Q,null))),r.a.createElement(w,null))}}]),t}(n.Component),Z=a(314),$=a(313),ee=a(311),te=a.n(ee),ae=(a(674),["./Organization.json","./OrganizationFactory.json","./SegmentDirectory.json","./WindingTreeEntrypoint.json"]),ne=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={ethAddress:"0xa268937c2573e2AB274BF6d96e88FfE0827F0D4D",abi:null,parsedAbi:[],abiOK:!1,lastResult:null,lastError:null,selectedMethod:null,contractAbis:null},a.fillAbi=function(e,t){"select-option"===t.action&&a.setState({abi:JSON.stringify(e.value),parsedAbi:e.value,abiOK:!0})},a.callSmartContractMethod=a.callSmartContractMethod.bind(Object(b.a)(a)),a.web3Eth=new z.a(window.ethereum),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadAbis();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadAbis",value:function(){var e,t={};(e=a(675)).keys().forEach(function(a){return t[a]=e(a)});var n=[];for(var r in t)if(-1!==ae.indexOf(r)){var l=t[r];n.push({value:l.abi,label:l.contractName})}this.setState({contractAbis:n}),this.fillAbi(n[3],{action:"select-option"})}},{key:"parseAbi",value:function(){var e;try{e=JSON.parse(this.state.abi)}catch(t){return this.setState({abiOK:!1}),void this.setState({lastError:t})}return this.setState({parsedAbi:e,abiOK:!0}),e}},{key:"err",value:function(e){this.setState({lastError:e}),console.error(this.state.lastError)}},{key:"callSmartContractMethod",value:function(e,t){e.target.blur();var a=e.target.parentElement.parentElement,n=Array.from(a.querySelectorAll("input[type=text]").values()).map(function(e){return e.value});try{this._callSmartContractMethod(t,n).catch(this.err.bind(this))}catch(r){this.err(r)}}},{key:"_callSmartContractMethod",value:function(e,t){var a=this;if(console.log("Calling "+e+"("+t.join(", ")+")"),!window.ethereum||!window.web3)throw new Error("Missing ethereum provider, consider installing Metamask");window.ethereum.enable();var n=new te.a(window.web3.currentProvider);if(!this.state.parsedAbi)throw new Error("ABI missing or not a json.");return n.accounts().then(function(r){var l=n.contract(a.state.parsedAbi,void 0,{from:r[0],gas:3e6}).at(a.state.ethAddress);return console.log(e),console.log(t),l[e].apply(l,Object(Z.a)(t)).then(function(e){a.setState({lastResult:e}),console.log(e),console.log(JSON.stringify(e,null,2))}).catch(a.err.bind(a))})}},{key:"render",value:function(){var e=this;if("undefined"===typeof window.ethereum)return r.a.createElement(r.a.Fragment,null);var t=this.state,a=t.ethAddress,n=t.abi,l=t.parsedAbi,s=t.abiOK,c=t.lastResult,o=t.lastError,i=t.selectedMethod,m=t.contractAbis;return r.a.createElement("div",{className:"caller"},r.a.createElement("label",null,"Address"),r.a.createElement(v.Form.Control,{type:"text",placeholder:"0x...",className:"form-control",value:a,onChange:function(t){e.setState({ethAddress:t.target.value})}}),r.a.createElement("label",null,"Contract"),r.a.createElement($.a,{options:m,onChange:this.fillAbi,defaultValue:m[3]}),r.a.createElement("label",null,"ABI"),r.a.createElement("textarea",{className:s?"form-control":"form-control text-danger",value:n,onChange:function(t){e.setState({abi:t.target.value}),e.parseAbi()}}),r.a.createElement("br",null),r.a.createElement(R,null,r.a.createElement("h3",null,"Functions"," ",r.a.createElement("small",null,"Click on a function name to set parameters and call the function.")),l.map(function(t){return"function"===t.type&&r.a.createElement("div",{key:t.name},r.a.createElement("span",{className:t.name===i?"card":""},r.a.createElement("span",{onClick:function(){e.setState({selectedMethod:i===t.name?null:t.name})},className:"btn btn-link"},t.name),i===t.name&&r.a.createElement("span",{className:"input-group"},t.inputs.map(function(e){return r.a.createElement(v.Form.Control,{type:"text",className:"form-control",placeholder:"".concat(e.name," (").concat(e.type,")"),key:e.name})}),r.a.createElement(v.Button,{onClick:function(a){return e.callSmartContractMethod(a,t.name)},className:"btn form-control btn-primary"},"Call!"))))}),c&&r.a.createElement("div",{className:"alert alert-success alert-dismissable",role:"alert"},r.a.createElement("h4",{className:"alert-heading"},"Result:"),r.a.createElement("pre",null,JSON.stringify(c,null,2)),r.a.createElement("br",null),r.a.createElement(v.Button,{className:"btn",onClick:function(){e.setState({lastResult:null})}},"Close")),o&&r.a.createElement("div",{className:"alert alert-danger alert-dismissable",role:"alert"},r.a.createElement("strong",null,"ERROR:")," ",o.toString()," ",r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:function(){e.setState({lastError:null})}},"Close"))))}}]),t}(r.a.Component),re=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement("h2",{className:"text-center"},"Call a contract"),r.a.createElement("p",null,"Set contract address and ABI (or select from preloaded contracts) and choose a function to call. See ",r.a.createElement("a",{href:"https://developers.windingtree.com/tutorials/how-to-call-smartcontract.html"},"developer portal")," for documentation."),r.a.createElement("p",null,"If you have trouble calling contracts, be aware that the ABIs provided here will only work with a ",r.a.createElement("code",null,"^0.8.1")," version of ",r.a.createElement("code",null,"@windingtree/wt-contracts"),". You can get ABIs for previous version on ",r.a.createElement("a",{href:"https://cdn.jsdelivr.net/npm/@windingtree/wt-contracts/"},"jsDelivr"),"."),r.a.createElement(P,null,r.a.createElement(ne,null))),r.a.createElement(w,null))}}]),t}(n.Component),le=function(){return r.a.createElement("main",{id:"app-content",className:"content-error bg-grad-up"},r.a.createElement("article",{className:"app-section d-flex align-items-center"},r.a.createElement(v.Container,null,r.a.createElement("div",{className:"py-1 py-md-5 text-center"},r.a.createElement("h1",{className:"mb-1 text-white"},"Oops... 404"),r.a.createElement("p",{className:"mb-2 lead text-white"},"That is not the page you are looking for."),r.a.createElement(v.Button,{href:"/",variant:"primary"},"Go to main")))))},se=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{path:["/debugger/:indexAddress/:organizationAddress","/debugger/:indexAddress","/debugger","/debugger.html"],component:T}),r.a.createElement(i.a,{path:["/guarantee-generator","/guarantee-generator.html"],component:X}),r.a.createElement(i.a,{path:["/contract-caller","/contract-caller.html"],component:re}),r.a.createElement(i.a,{path:"/",exact:!0,component:T}),r.a.createElement(i.a,{component:le}))};a(687),a(688);!function(e){s.a.render;(0,s.a.hydrate)(r.a.createElement(o.AppContainer,null,r.a.createElement(c.a,{basename:""},r.a.createElement(e,null))),document.getElementById("root"))}(se,document.getElementById("root"))},93:function(e){e.exports=[{name:"Test environment - hotels",entrypoint:"0xa268937c2573e2AB274BF6d96e88FfE0827F0D4D",address:"0x2c29c421d7fd7be4cc2bfb6d1a44426e43021914",network:"ropsten",segment:"hotels"}]}},[[315,1,2]]]);
//# sourceMappingURL=main.10de953a.chunk.js.map