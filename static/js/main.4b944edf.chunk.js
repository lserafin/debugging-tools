(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{310:function(e,t,a){e.exports=a(710)},482:function(e,t){},484:function(e,t){},544:function(e,t){},545:function(e,t){},680:function(e,t,a){},681:function(e,t,a){var n={"./AbstractOrganizationFactory.json":682,"./AbstractSegmentDirectory.json":683,"./AdminUpgradeabilityProxy.json":684,"./App.json":685,"./BaseAdminUpgradeabilityProxy.json":686,"./BaseUpgradeabilityProxy.json":687,"./CustomOrganizationTest.json":688,"./ERC165.json":689,"./ERC165Checker.json":690,"./IERC165.json":691,"./ImplementationProvider.json":692,"./Initializable.json":693,"./Organization.json":694,"./OrganizationFactory.json":695,"./OrganizationInterface.json":696,"./Package.json":697,"./Proxy.json":698,"./SegmentDirectory.json":699,"./UpgradeabilityProxy.json":700,"./WindingTreeEntrypoint.json":701,"./ZOSLibAddress.json":702,"./ZOSLibOwnable.json":703};function r(e){var t=s(e);return a(t)}function s(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=681},707:function(e,t,a){},710:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),l=a.n(s),i=a(179),o=a(307),c=a(59),m=a(19),u=a.n(m),d=a(38),h=a(26),p=a(27),f=a(29),g=a(28),b=a(30),E=a(31),v=a(10),w=function(){return r.a.createElement("div",{id:"app-header"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",id:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand mr-2",href:"/"},"Winding Tree"),r.a.createElement("a",{className:"nav-link",href:"/debugger"},"Debugger"),r.a.createElement("a",{className:"nav-link",href:"/guarantee-generator"},"Guarantee Generator"),r.a.createElement("a",{className:"nav-link",href:"/contract-caller"},"Contract Caller"))))},x=function(){return r.a.createElement(v.Footer,{copyrightHref:"https://windingtree.com",copyrightText:"Winding Tree"},r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("dl",{className:"mb-1"},r.a.createElement("dt",{className:"mb-1"},"About"),r.a.createElement("dd",null,r.a.createElement("nav",{className:"nav flex-column small"},r.a.createElement("a",{href:"https://windingtree.com",className:"nav-link px-0 text-white text--alpha-inverse"},"Homepage"),r.a.createElement("a",{href:"https://blog.windingtree.com/",className:"nav-link px-0 text-white text--alpha-inverse"},"Blog"),r.a.createElement("a",{href:"https://developers.windingtree.com",className:"nav-link px-0 text-white text--alpha-inverse"},"Developer portal"))))),r.a.createElement("div",{className:"col-6 col-md-3"},r.a.createElement("dl",{className:"mb-1"},r.a.createElement("dt",{className:"mb-1"},"Developers"),r.a.createElement("dd",null,r.a.createElement("nav",{className:"nav flex-column small"},r.a.createElement("a",{href:"https://github.com/windingtree/wt-guarantee-generator",className:"nav-link px-0 text-white text--alpha-inverse"},"Source code"),r.a.createElement("a",{href:"https://github.com/windingtree",className:"nav-link px-0 text-white text--alpha-inverse"},"GitHub"),r.a.createElement("a",{href:"https://groups.google.com/forum/#!forum/windingtree",className:"nav-link px-0 text-white text--alpha-inverse"},"Google Group"))))))},y=a(301),O=a(302),k=a.n(O),j=a(303),N=a.n(j),A=function(e){var t=e.block,a=e.label;return t&&a?r.a.createElement("div",{className:"loader",style:{height:t,opacity:1}},r.a.createElement("div",null,r.a.createElement("i",{className:"mdi mdi-loading mdi-36px"}),r.a.createElement("p",null,a))):t?r.a.createElement("div",{className:"loader",style:{height:t,opacity:1}},r.a.createElement("i",{className:"mdi mdi-loading mdi-36px"})):a?r.a.createElement("span",null,r.a.createElement("i",{className:"mdi mdi-loading mdi-36px mdi-spin text-primary"})," ",a):r.a.createElement("i",{className:"mdi mdi-loading mdi-36px mdi-spin text-primary"})},C=function(e){var t=e.network,a=e.address,n=e.children;return r.a.createElement("a",{href:"https://".concat("mainnet"!==t?"".concat(t,"."):"","etherscan.io/address/").concat(a),target:"_blank",rel:"noopener noreferrer"},n)},S=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={field:void 0,link:void 0,status:void 0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n,r,s,l,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.index,n=t.fieldName,e.next=3,a[n];case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=a[n];case 6:r=e.t0,s=r,l=!1,r&&r.ref&&0===r.ref.indexOf("bzz-raw:")?(s="".concat("https://swarm.windingtree.com","/").concat(r.ref),l=!0):r&&r.ref?(s=r.ref,l=!0):s.startsWith&&s.startsWith("https://")&&(l=!0),this.setState({field:r,link:s}),l&&fetch(s).then(function(){i.setState({status:!0})}).catch(function(){i.setState({status:!1})});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.field,n=e.link,s=e.status,l=this.props.fieldName;if((!a||!a.ref)&&l.indexOf("Uri")!==l.length-3){if("object"===typeof a){var i=Object.keys(a).sort(function(e,t){return e>t?1:-1}).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("strong",null,e),": ",r.a.createElement(t,{index:a,fieldName:e}))});return r.a.createElement("ul",null,i)}return r.a.createElement("span",null,a)}return r.a.createElement("span",null,r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},a&&a.ref||a),void 0===s&&r.a.createElement(A,null),!0===s&&r.a.createElement("i",{className:"mdi mdi-24px mdi-check",style:{color:"green"}}),!1===s&&r.a.createElement("i",{className:"mdi mdi-24px mdi-exclamation",style:{color:"red"}}))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={resolved:!1,address:void 0,owner:void 0,orgJsonUri:void 0,resolvedOrgJson:!1,orgJson:void 0,orgJsonError:void 0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n,r,s,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.item,a=this.state,n=a.resolved,r=a.resolvedOrgJson,n){e.next=14;break}return e.next=5,t.address;case 5:return e.t0=e.sent,e.next=8,t.owner;case 8:return e.t1=e.sent,e.next=11,t.orgJsonUri;case 11:e.t2=e.sent,s={address:e.t0,owner:e.t1,orgJsonUri:e.t2,resolved:!0},this._isMounted&&this.setState(s);case 14:if(r){e.next=27;break}return e.prev=15,e.next=18,t.orgJson;case 18:return e.next=20,e.sent.contents;case 20:l=e.sent,this._isMounted&&this.setState({orgJson:l,resolvedOrgJson:!0,orgJsonError:void 0}),e.next=27;break;case 24:e.prev=24,e.t3=e.catch(15),this._isMounted&&this.setState({orgJsonError:e.t3.toString(),resolvedOrgJson:!0});case 27:case"end":return e.stop()}},e,this,[[15,24]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(d.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.item,a=e.network,n=e.readApi,s=this.state,l=s.resolved,i=s.address,o=s.owner,c=s.orgJsonUri,m=s.resolvedOrgJson,u=s.orgJson,d=s.orgJsonError;if(!l)return r.a.createElement(v.Row,null,r.a.createElement(v.Col,null,r.a.createElement(A,{label:"Loading data from ".concat(t.address),block:128})));var h=[];return m&&u&&(h=Object.keys(u).sort(function(e,t){return e>t?1:-1}).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("strong",null,e),": ",r.a.createElement(S,{index:u,fieldName:e}))})),r.a.createElement(v.Row,null,r.a.createElement(v.Col,{className:"mb-1"},r.a.createElement("h4",null,i,r.a.createElement("span",{className:"badge badge-pill badge-primary ml-1"},r.a.createElement(C,{network:a,address:i},"Etherscan")),n&&r.a.createElement("span",{className:"badge badge-pill badge-primary ml-1"},r.a.createElement("a",{href:"".concat(n,"/").concat(i),target:"_blank",rel:"noopener noreferrer"},"Read API"))),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Owner"),r.a.createElement("td",null,r.a.createElement(C,{network:a,address:o},o))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON URI"),r.a.createElement("td",null,r.a.createElement(S,{index:{uri:{ref:c}},fieldName:"uri"}))),r.a.createElement("tr",null,r.a.createElement("th",null,"ORG.JSON contents"),r.a.createElement("td",null,!m&&r.a.createElement(A,null),m&&d&&r.a.createElement("p",{className:"alert alert-danger"},d),m&&u&&r.a.createElement("ul",null,h)))))))}}]),t}(n.Component),P={hotels:{readApiSuffix:"hotels",singular:"hotel",plural:"hotels"},airlines:{readApiSuffix:"airlines",singular:"airline",plural:"airlines"}},M=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={config:void 0,items:void 0,lifTokenAddress:void 0,nextItemPage:1},a.getItems=a.getItems.bind(Object(E.a)(Object(E.a)(a))),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.instance,n=t.segment,this.setState({config:P[n]}),e.t0=this,e.next=5,a.getOrganizations();case 5:return e.t1=e.sent,e.next=8,a._getDeployedDirectory();case 8:return e.next=10,e.sent.methods.getLifToken().call();case 10:e.t2=e.sent,e.t3={items:e.t1,lifTokenAddress:e.t2},e.t0.setState.call(e.t0,e.t3);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(u.a.mark(function e(t,a){var n,r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.instance,s=n.segment,t.instance===r){e.next=15;break}return this.setState({config:P[s]}),this.setState({items:void 0,lifTokenAddress:void 0}),e.t0=this,e.next=7,r.getOrganizations();case 7:return e.t1=e.sent,e.next=10,r._getDeployedDirectory();case 10:return e.next=12,e.sent.methods.getLifToken().call();case 12:e.t2=e.sent,e.t3={items:e.t1,lifTokenAddress:e.t2},e.t0.setState.call(e.t0,e.t3);case 15:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){var e=this.state,t=e.nextItemPage,a=e.items,n=e.config,s=this.props,l=s.readApi,i=s.network,o=s.ethAddress;return a.filter(function(e){return!o||e.address===o}).slice(0,5*t).map(function(e){var t=l?"".concat(l,"/").concat(n.readApiSuffix):void 0;return r.a.createElement(I,{item:e,key:e.address,network:i,readApi:t})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.instance,n=t.network,s=t.ethAddress,l=this.state,i=l.items,o=l.lifTokenAddress,c=l.config,m=l.nextItemPage;if(!i)return r.a.createElement(A,{label:"Loading items from ".concat(a.address),block:128});var u=this.getItems();return r.a.createElement(v.Container,null,r.a.createElement(v.Row,null,r.a.createElement(v.Col,null,r.a.createElement("h2",null,"Index at ",r.a.createElement(C,{network:n,address:a.address},a.address)),r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Lif token address"),r.a.createElement("td",null,r.a.createElement(C,{network:n,address:o},o))),r.a.createElement("tr",null,r.a.createElement("th",null,c.singular," count"),r.a.createElement("td",null,i.length)))),r.a.createElement("h3",null,c.plural.substr(0,1).toUpperCase(),c.plural.substr(1)))),u,5*m<i.length&&r.a.createElement(v.Row,null,r.a.createElement(v.Col,null,r.a.createElement("p",{className:"text-center mb-2"},!s&&r.a.createElement(v.Button,{onClick:function(){var t=e.state.nextItemPage;e.setState({nextItemPage:t+1})}},"Load more")))))}}]),t}(n.Component),D=function(e){var t=e.index,a=e.ethAddress,n=y.WtJsLibs.createInstance({onChainDataOptions:{provider:"https://".concat(t.network,".infura.io/v3/").concat("def1927234dd483c84e21d35d0e36a95")},offChainDataOptions:{adapters:{"bzz-raw":{options:{swarmProviderUrl:"https://swarm.windingtree.com"},create:function(e){return new k.a(e)}},https:{options:{},create:function(e){return new N.a(e)}}}}});return r.a.createElement(M,{instance:n.getDirectory(t.segment,t.address),network:t.network,readApi:t.readApi,segment:t.segment,ethAddress:a})},F=a(96),J=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={index:F.length&&F[0],ethAddress:""},a.onIndexChange=a.onIndexChange.bind(Object(E.a)(Object(E.a)(a))),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"onIndexChange",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=F.find(function(e){return e.address===t.target.value}),this.setState({index:a});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this.props.match.params;e.organizationAddress&&this.setState({ethAddress:e.organizationAddress}),e.indexAddress&&this.onIndexChange({target:{value:e.indexAddress}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.index,n=t.ethAddress,s=F.map(function(e){return r.a.createElement("option",{key:e.name,value:e.address},e.name," (",e.address,")")});return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement(v.Form.Group,{controlId:"index"},r.a.createElement(v.Form.Control,{as:"select",onChange:this.onIndexChange,defaultValue:a.address},s),r.a.createElement(v.Form.Control,{type:"text",placeholder:"optionally filter by organization address",className:"form-control",value:n,onChange:function(t){e.setState({ethAddress:t.target.value})}})),r.a.createElement("div",{className:"mt-2"},!a&&r.a.createElement("div",{className:"alert alert-info"},"Select Winding Tree index first."),a&&r.a.createElement(D,{index:a,ethAddress:n}))),r.a.createElement(x,null))}}]),t}(n.Component),T=function(e){var t=e.children;return"undefined"!==typeof window.ethereum?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(v.Alert,{variant:"warning",show:!0,dismissible:!1},"You need to install and allow"," ",r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Metamask")," ","or another Web3 enabled browser that supports"," ",r.a.createElement("a",{href:"https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sign",target:"_blank",rel:"noopener noreferrer"},"eth_sign call"),"!")},R=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={inProgress:!1,sub:void 0,tick:void 0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){if(!this.state.sub){var e=this;this.setState({sub:window.ethereum.on("accountsChanged",function(t){e.setState({tick:new Date})})})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.blocking,s=this.state.inProgress;return!1===n||void 0!==window.ethereum.selectedAddress?r.a.createElement(r.a.Fragment,null,a):r.a.createElement(v.Button,{onClick:function(){e.setState({inProgress:!0}),window.ethereum.enable().then(function(){e.setState({inProgress:!1})})},active:s,block:!0,disabled:s,outlined:!1,className:"btn-warning"},"You need to sign in to"," ",r.a.createElement("a",{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"},"Metamask")," ","first.")}}]),t}(r.a.Component),B=a(60),_=a(24),z=a.n(_),G=a(121),L=a.n(G),U=a(80),W=a.n(U),H=a(122),Y=a.n(H),K=a(304),V=a.n(K),Z=function(e){var t=e.contents;return r.a.createElement("div",{className:"clipboardable"},r.a.createElement("pre",null,t),r.a.createElement(V.a,{"data-clipboard-text":t,className:"clipboard-wrap","button-title":"Copy to clipboard"},r.a.createElement("i",{className:"mdi mdi-clipboard-text"})))},q=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={sub:void 0,claimParts:{subject:"",guarantor:window.ethereum&&window.ethereum.selectedAddress||"",expiresAt:W()().add(1,"month").format("YYYY-MM-DD HH:mm:ss")},errors:{},claim:"",signature:""},a.handleClaimPartChange=a.handleClaimPartChange.bind(Object(E.a)(Object(E.a)(a))),a.generateClaim=a.generateClaim.bind(Object(E.a)(Object(E.a)(a))),a.web3Eth=new L.a(window.ethereum),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n,r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.sub,(a=Y.a.parse(window.location.hash)).msg)try{n=z.a.hexToUtf8(a.msg),r=JSON.parse(n),this.setState({claimParts:{subject:r.subject,guarantor:r.guarantor,expiresAt:W()(r.expiresAt).format("YYYY-MM-DD HH:mm:ss")},claim:n})}catch(l){delete a.msg,window.location.hash=Y.a.stringify(a),this.setState({errors:{global:"Cannot process URL parameters: ".concat(l.toString())}})}t||a.msg||(s=this,this.setState({sub:window.ethereum.on("accountsChanged",function(e){var t=s.state.claimParts;!t.guarantor&&window.ethereum.selectedAddress&&s.setState({claimParts:Object.assign({},t,{guarantor:window.ethereum.selectedAddress})})})}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClaimPartChange",value:function(e){var t=e.target.id,a=e.target.value,n=this.state,r=n.errors,s=n.claimParts,l=Object.assign(s,Object(B.a)({},t,a)),i={};["subject","guarantor"].indexOf(t)>-1?z.a.isAddress(a)||(l=Object.assign(s,Object(B.a)({},t,a)),i=Object.assign(r,Object(B.a)({},t,"Invalid ethereum address"))):"expiresAt"===t&&("Invalid date"===W()(a).format()&&(l=Object.assign(s,Object(B.a)({},t,a)),i=Object.assign(r,Object(B.a)({},t,"Invalid date"))),W()(a).isAfter(new Date)||(l=Object.assign(s,Object(B.a)({},t,a)),i=Object.assign(r,Object(B.a)({},t,"Expiration has to be in the future")))),window.location.hash="",this.setState({claimParts:l,errors:i,signature:"",claim:""})}},{key:"generateClaim",value:function(){var e=this.state,t=e.claimParts,a=e.errors,n="";t.subject&&t.guarantor&&t.expiresAt&&!Object.keys(a).length&&(n=JSON.stringify(Object.assign({},t,{expiresAt:W()(t.expiresAt).valueOf()/1e3}))),window.location.hash=Y.a.stringify({msg:z.a.utf8ToHex(n)}),this.setState({claim:n,signature:""})}},{key:"render",value:function(){var e=this;if("undefined"===typeof window.ethereum)return r.a.createElement(r.a.Fragment,null);var t=this.state,a=t.claimParts,n=t.errors,s=t.claim,l=t.signature;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"container mb-2"},n.global&&r.a.createElement(v.Alert,{variant:"danger",show:!0,dismissible:!0},n.global),r.a.createElement("h3",null,"1. Claim"),r.a.createElement(v.Form.Group,{controlId:"subject"},r.a.createElement(v.Form.Label,null,"ORG.ID (Subject's Ethereum address)"),r.a.createElement(v.Form.Control,{type:"text",placeholder:"0x...",value:a.subject,onChange:this.handleClaimPartChange,className:n.subject?"is-invalid":""}),r.a.createElement(v.Form.Text,{className:"text-muted"},"This is the address assigned to the 0xORG smart contract."),n.subject&&r.a.createElement(v.Form.Text,{className:"text-danger"},n.subject)),r.a.createElement(v.Form.Group,{controlId:"guarantor"},r.a.createElement(v.Form.Label,null,"Guarantor's Ethereum address"),r.a.createElement(v.Form.Control,{type:"text",placeholder:"0x...",value:a.guarantor,onChange:this.handleClaimPartChange,className:n.guarantor?"is-invalid":""}),r.a.createElement(v.Form.Text,{className:"text-muted"},"This address will be used when checking the trust level of the hotel. It should be set as an ",r.a.createElement("code",null,"associatedKey")," in an ORG.ID."),n.guarantor&&r.a.createElement(v.Form.Text,{className:"text-danger"},n.guarantor)),r.a.createElement(v.Form.Group,{controlId:"expiresAt"},r.a.createElement(v.Form.Label,null,"Expiration date and time"),r.a.createElement(v.Form.Control,{type:"string",value:a.expiresAt,onChange:this.handleClaimPartChange,className:n.expiresAt?"is-invalid":""}),n.expiresAt&&r.a.createElement(v.Form.Text,{className:"text-danger"},n.expiresAt)),r.a.createElement(v.Button,{onClick:this.generateClaim,block:!0,disabled:!(a.subject&&a.guarantor&&a.expiresAt)||Object.keys(n).length},"Generate claim"),s&&r.a.createElement("div",null,r.a.createElement("h4",{className:"mt-1"},"Serialized claim"),r.a.createElement(Z,{contents:s}),r.a.createElement("h4",{className:"mt-1"},"Hex-encoded serialized claim"),r.a.createElement(Z,{contents:z.a.utf8ToHex(s)}))),r.a.createElement("div",{className:"container mb-2"},r.a.createElement("h3",null,"2. Signature"),r.a.createElement("div",null,r.a.createElement(R,null,l&&r.a.createElement(Z,{contents:l}),r.a.createElement(v.Button,{onClick:function(){e.web3Eth.personal.sign(s,window.ethereum.selectedAddress).then(function(t){e.setState({signature:t})})},active:!1,block:!0,disabled:l||!s||!window.ethereum.selectedAddress||window.ethereum.selectedAddress.toLowerCase()!==a.guarantor.toLowerCase(),outlined:!1,className:""},"Create signature"),(!s||!window.ethereum.selectedAddress||window.ethereum.selectedAddress.toLowerCase()!==a.guarantor.toLowerCase())&&r.a.createElement("p",{className:"text-muted"},"You can sign the claim if it is generated and if you are logged into Metamask with the same address as Guarantor's address."),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mt-1"},r.a.createElement("a",{href:"https://www.etherchain.org/tools/verifySignature",target:"_blank",rel:"noopener noreferrer"},"Verify independently on Etherchain:")),r.a.createElement(Z,{contents:'{\n  "version": "2",\n  "address": "'.concat(a.guarantor,'",\n  "msg": "').concat(z.a.utf8ToHex(s),'",\n  "sig": "').concat(l,'"\n}')}))))),s&&l&&r.a.createElement("div",{className:"container mb-2"},r.a.createElement("h3",null,"4. Result"),r.a.createElement(Z,{contents:'{\n  "claim": "'.concat(z.a.utf8ToHex(s),'",\n  "signature": "').concat(l,'"\n}')}),r.a.createElement("p",null,"Send the result back to the ORG.ID owner.")))}}]),t}(r.a.Component),Q=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement("h2",{className:"text-center"},"Generate a relationship guarantee"),r.a.createElement(T,null,r.a.createElement(q,null))),r.a.createElement(x,null))}}]),t}(n.Component),X=a(309),$=a(308),ee=a(305),te=a.n(ee),ae=(a(680),["./Organization.json","./OrganizationFactory.json","./SegmentDirectory.json","./WindingTreeEntrypoint.json"]),ne=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={ethAddress:"0x7EB7c3B768D75C740B6d08D3b3eA411B3296ceBB",abi:null,parsedAbi:[],abiOK:!1,lastResult:null,lastError:null,selectedMethod:null,contractAbis:null},a.fillAbi=function(e,t){"select-option"===t.action&&a.setState({abi:JSON.stringify(e.value),parsedAbi:e.value,abiOK:!0})},a.callSmartContractMethod=a.callSmartContractMethod.bind(Object(E.a)(Object(E.a)(a))),a.web3Eth=new L.a(window.ethereum),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadAbis();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadAbis",value:function(){var e,t={};(e=a(681)).keys().forEach(function(a){return t[a]=e(a)});var n=[];for(var r in t)if(-1!==ae.indexOf(r)){var s=t[r];n.push({value:s.abi,label:s.contractName})}this.setState({contractAbis:n}),this.fillAbi(n[3],{action:"select-option"})}},{key:"parseAbi",value:function(){var e;try{e=JSON.parse(this.state.abi)}catch(t){return this.setState({abiOK:!1}),void this.setState({lastError:t})}return this.setState({parsedAbi:e,abiOK:!0}),e}},{key:"err",value:function(e){this.setState({lastError:e}),console.error(this.state.lastError)}},{key:"callSmartContractMethod",value:function(e,t){e.target.blur();var a=e.target.parentElement.parentElement,n=Array.from(a.querySelectorAll("input[type=text]").values()).map(function(e){return e.value});try{this._callSmartContractMethod(t,n).catch(this.err.bind(this))}catch(r){this.err(r)}}},{key:"_callSmartContractMethod",value:function(e,t){var a=this;if(console.log("Calling "+e+"("+t.join(", ")+")"),!window.ethereum||!window.web3)throw new Error("Missing ethereum provider, consider installing Metamask");window.ethereum.enable();var n=new te.a(window.web3.currentProvider);if(!this.state.parsedAbi)throw new Error("ABI missing or not a json.");return n.accounts().then(function(r){var s=n.contract(a.state.parsedAbi,void 0,{from:r[0],gas:3e6}).at(a.state.ethAddress);return console.log(e),console.log(t),s[e].apply(s,Object(X.a)(t)).then(function(e){a.setState({lastResult:e}),console.log(e),console.log(JSON.stringify(e,null,2))}).catch(a.err.bind(a))})}},{key:"render",value:function(){var e=this;if("undefined"===typeof window.ethereum)return r.a.createElement(r.a.Fragment,null);var t=this.state,a=t.ethAddress,n=t.abi,s=t.parsedAbi,l=t.abiOK,i=t.lastResult,o=t.lastError,c=t.selectedMethod,m=t.contractAbis;return r.a.createElement("div",null,r.a.createElement("label",null,"Address"),r.a.createElement(v.Form.Control,{type:"text",placeholder:"0x...",className:"form-control",value:a,onChange:function(t){e.setState({ethAddress:t.target.value})}}),r.a.createElement("label",null,"Contract"),r.a.createElement($.a,{options:m,onChange:this.fillAbi,defaultValue:m[3]}),r.a.createElement("label",null,"ABI"),r.a.createElement("textarea",{className:l?"form-control":"form-control text-danger",value:n,onChange:function(t){e.setState({abi:t.target.value}),e.parseAbi()}}),r.a.createElement("br",null),r.a.createElement(R,null,r.a.createElement("h3",null,"Functions"," ",r.a.createElement("small",null,"Click on a function name to set parameters and call the function.")),s.map(function(t){return"function"===t.type&&r.a.createElement("div",{key:t.name},r.a.createElement("span",{className:t.name===c?"card":""},r.a.createElement("span",{onClick:function(){e.setState({selectedMethod:c===t.name?null:t.name})},className:"btn btn-link"},t.name),c===t.name&&r.a.createElement("span",{className:"input-group"},t.inputs.map(function(e){return r.a.createElement(v.Form.Control,{type:"text",className:"form-control",placeholder:e.name,key:e.name})}),r.a.createElement(v.Button,{onClick:function(a){return e.callSmartContractMethod(a,t.name)},className:"btn form-control btn-primary"},"Call!"))))}),i&&r.a.createElement("div",{className:"alert alert-success alert-dismissable",role:"alert"},r.a.createElement("h4",{className:"alert-heading"},"Result:"),r.a.createElement("pre",null,JSON.stringify(i,null,2)),r.a.createElement("br",null),r.a.createElement(v.Button,{className:"btn",onClick:function(){e.setState({lastResult:null})}},"Close")),o&&r.a.createElement("div",{className:"alert alert-danger alert-dismissable",role:"alert"},r.a.createElement("strong",null,"ERROR:")," ",o.toString()," ",r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:function(){e.setState({lastError:null})}},"Close"))))}}]),t}(r.a.Component),re=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("div",{className:"container mt-1"},r.a.createElement("h2",{className:"text-center"},"Call a contract"),r.a.createElement("p",null,"Set contract address and ABI (or select from preloaded contracts) and choose a function to call."),r.a.createElement(T,null,r.a.createElement(ne,null))),r.a.createElement(x,null))}}]),t}(n.Component),se=function(){return r.a.createElement("main",{id:"app-content",className:"content-error bg-grad-up"},r.a.createElement("article",{className:"app-section d-flex align-items-center"},r.a.createElement(v.Container,null,r.a.createElement("div",{className:"py-1 py-md-5 text-center"},r.a.createElement("h1",{className:"mb-1 text-white"},"Oops... 404"),r.a.createElement("p",{className:"mb-2 lead text-white"},"That is not the page you are looking for."),r.a.createElement(v.Button,{href:"/",variant:"primary"},"Go to main")))))},le=function(){return r.a.createElement(c.c,null,r.a.createElement(c.a,{path:["/debugger/:indexAddress/:organizationAddress","/debugger/:indexAddress","/debugger","/debugger.html"],component:J}),r.a.createElement(c.a,{path:["/guarantee-generator","/guarantee-generator.html"],component:Q}),r.a.createElement(c.a,{path:["/contract-caller","/contract-caller.html"],component:re}),r.a.createElement(c.a,{path:"/",exact:!0,component:J}),r.a.createElement(c.a,{component:se}))};a(706),a(707);!function(e){l.a.render;(0,l.a.hydrate)(r.a.createElement(o.AppContainer,null,r.a.createElement(i.a,null,r.a.createElement(e,null))),document.getElementById("root"))}(le,document.getElementById("root"))},96:function(e){e.exports=[{name:"Playground - Lisbon Hotels Directory",address:"0x8ea119a7ef0ac4c1a83a3bb6d1aa1a3afcafde8b",network:"ropsten",readApi:"https://lisbon-api.windingtree.com",segment:"hotels"},{name:"Playground - Lisbon Airlines Directory",address:"0x6f8ab047ccc0c8128cc4d343feb618065a13d965",network:"ropsten",readApi:"https://lisbon-api.windingtree.com",segment:"airlines"}]}},[[310,1,2]]]);
//# sourceMappingURL=main.4b944edf.chunk.js.map